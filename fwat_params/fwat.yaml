# FWAT Package parameters
simulation:
  DUMP_WAVEFIELDS: True

# Measurements block, for computing adjoint source
measure:
  # tele seismic
  tele:
    COMPS: ['Z','R'] # components used 
    CH_CODE: BX   # CH_CODE
    FILTER_BANDS: 
      - [5.,50.]
    TIME_WINDOW: [5.,45.] # before and after first arrival
    VERBOSE_MODE: True
    ADJSRC_TYPE: 2 # 2,cross-conv

  noise: # multichannel noise 
    CC_COMPS: ['ZZ','TT']  # {SOURCE-COMP}{RECEIVER-COMP}
    CH_CODE: BX   # CH_CODE
    FILTER_BANDS:  # filter bands used, in s, [T_min,Tmax]
      - [20.,40.]
      - [15.,30.]
      - [10.,20.]
      - [5.,15.]
    GROUPVEL_WIN:   # Time window, determined by group velocity, km/s, [v_min,vmax]
      - [2.0,5.]
      - [2.0,5.]
      - [2.0,5.]
      - [2.0,5.]
    SNR_THRESHOLD: [0.,0.,0.,0.] # exclude data when SNR < SNR_THRESHOLD in a each band 
    USE_EGF: True   # if False, the input data is Cross-correlation, a negative derivative will be applied
    ADJ_SRC_NORM: False  # if true, the adjoint source will be normalized
    USE_NEAR_OFFSET: True # if FALSE, reset tstart
    VERBOSE_MODE: True
    ADJSRC_TYPE: 5 # 5/7/exp_phase/cc_time

  # sks 
  sks:
    COMPS: ['R','T'] # components used 
    CH_CODE: BX   # CH_CODE
    FILTER_BANDS: 
      - [5.,50.]
    TIME_WINDOW: [5.,45.] # before and after first arrival
    VERBOSE_MODE: True
    ADJSRC_TYPE: SI #  SI (splitting_intensity),cross-conv
  
  # receiver function
  rf:
    CH_CODE: BX   # CH_CODE
    FILTER_BANDS: 
      - [5.,50.]
    GAUSS_F0:
      - [1.0]
    MINDERR: 0.001
    MAXIT: 150
    TIME_WINDOW: [5.,25.] # time window, before/after t= 0
    TSHIFT: 5.
    VERBOSE_MODE: True
    ADJSRC_TYPE: 2   # only L2 norm

# optimization
optimize:
  SMOOTHING: [16000.,8000.]  # gaussian smoothing in horizontal/vertical direction, in m
  OPT_METHOD: LBFGS  # GD/ LBFGS
  PRECOND_TYPE: z_precond # default / z_precond /z2_precond/ z_sqrt_precond
  MAX_PER: 0.02 # maximum relative perturbation

  # model/kernel type
  # iso configuration
  #     0: kappa,mu,rho
  #     1: vp,vs,rho
  #     2: vp/vs,vs,rho
  # dtti configuration:
  #     0: c11-c66,rho
  #     1: vp,vs,rho,gcp,gsp
  #     2. vph,vpv,vsh,vsv,rho,eta,gcp,gsp
  #     3. vp,vs,rho,kappaa,kappab,eta,gcp,gsp  where kappaa = (vph/vph), vp = sqrt((2*vsh^2 + vsv^2)/3), kappab = (vsv/vpv)
  MODEL_TYPE: iso 
  KERNEL_SET: 2
  MASK_VARS: [] # set all the gradients related to index in it to 0